"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[650],{4650:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});var o=l(3396);const r={class:"page_content"},m={class:"flex"},t={class:"input_box"},u={class:"flex"},s={class:"flex"};function d(e,a,l,d,i,n){const p=(0,o.up)("el-breadcrumb-item"),c=(0,o.up)("el-breadcrumb"),f=(0,o.up)("Search"),g=(0,o.up)("el-icon"),b=(0,o.up)("el-button"),w=(0,o.up)("el-input"),h=(0,o.up)("el-table-column"),_=(0,o.up)("el-switch"),V=(0,o.up)("el-table"),W=(0,o.up)("el-pagination"),U=(0,o.up)("el-form-item"),k=(0,o.up)("el-form"),D=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(c,{"separator-icon":e.ArrowRight},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{to:{path:"/"}},{default:(0,o.w5)((()=>[(0,o.Uk)("首页")])),_:1}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)("账号列表")])),_:1})])),_:1},8,["separator-icon"]),(0,o._)("div",r,[(0,o._)("div",m,[(0,o._)("div",t,[(0,o.Wm)(w,{modelValue:e.searchParams.query,"onUpdate:modelValue":a[0]||(a[0]=a=>e.searchParams.query=a),placeholder:"搜索关键字",class:"input-with-select"},{append:(0,o.w5)((()=>[(0,o.Wm)(b,{onClick:d.searchList},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])]),(0,o.Wm)(b,{type:"primary",onClick:d.addUser},{default:(0,o.w5)((()=>[(0,o.Uk)("新建用户")])),_:1},8,["onClick"])]),(0,o.Wm)(V,{data:e.userList,style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{prop:"username",label:"姓名",width:"180"}),(0,o.Wm)(h,{prop:"email",label:"邮箱",width:"180"}),(0,o.Wm)(h,{prop:"mobile",label:"电话"}),(0,o.Wm)(h,{prop:"role_name",label:"角色"}),(0,o.Wm)(h,{prop:"mg_state",label:"状态"},{default:(0,o.w5)((e=>[(0,o.Wm)(_,{modelValue:e.row.mg_state,"onUpdate:modelValue":a=>e.row.mg_state=a,onChange:a=>d.switchChange(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,o.Wm)(h,{label:"操作"},{default:(0,o.w5)((e=>[(0,o.Wm)(b,{type:"primary",onClick:a=>d.editRow(e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("编辑")])),_:2},1032,["onClick"]),(0,o.Wm)(b,{type:"danger",onClick:a=>d.deleteRow(e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,o.Wm)(W,{currentPage:e.searchParams.pagenum,"onUpdate:currentPage":a[1]||(a[1]=a=>e.searchParams.pagenum=a),"page-size":e.searchParams.pagesize,"onUpdate:pageSize":a[2]||(a[2]=a=>e.searchParams.pagesize=a),"page-sizes":[2,5,10,20],small:e.small,layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:d.searchList,onCurrentChange:d.searchList},null,8,["currentPage","page-size","small","total","onSizeChange","onCurrentChange"])]),(0,o.Wm)(D,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[8]||(a[8]=a=>e.dialogFormVisible=a),title:"新建用户"},{footer:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(b,{type:"primary",onClick:a[7]||(a[7]=e=>d.submitForm(d.userForm))},{default:(0,o.w5)((()=>[(0,o.Uk)("确定")])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(k,{ref:"userForm",model:e.formData,rules:e.rules},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{label:"用户名称",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:e.formData.username,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.username=a),placeholder:"请输入用户名称"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(U,{label:"用户密码",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{type:"password",modelValue:e.formData.password,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.password=a),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(U,{label:"邮箱",prop:"email"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:e.formData.email,"onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.email=a),placeholder:"请输入用户邮箱"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(U,{label:"手机号",prop:"mobile"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:e.formData.mobile,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.mobile=a),placeholder:"请输入用户手机号"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,o.Wm)(D,{modelValue:e.dialogFormEVisible,"onUpdate:modelValue":a[12]||(a[12]=a=>e.dialogFormEVisible=a),title:"编辑用户"},{footer:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(b,{type:"primary",onClick:a[11]||(a[11]=e=>d.submitEForm(d.userForm2))},{default:(0,o.w5)((()=>[(0,o.Uk)("确定")])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(k,{ref:"userForm2",model:e.formData2,rules:e.rules2},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{label:"邮箱",prop:"email"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:e.formData2.email,"onUpdate:modelValue":a[9]||(a[9]=a=>e.formData2.email=a),placeholder:"请输入用户邮箱"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(U,{label:"手机号",prop:"mobile"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:e.formData2.mobile,"onUpdate:modelValue":a[10]||(a[10]=a=>e.formData2.mobile=a),placeholder:"请输入用户手机号"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}var i=l(4870),n=l(9818),p={name:"roles",setup(){const e=(0,i.qj)({searchParams:{query:"",pagesize:5,pagenum:1},total:0,userList:[],dialogFormVisible:!1,dialogFormEVisible:!1,formData:{username:"",password:"",email:"",mobile:""},formData2:{id:"",email:"",mobile:""},rules:{username:[{required:!0,message:"此项为必填",trigger:"blur"}],password:[{required:!0,message:"此项为必填",trigger:"blur"}],email:[{required:!1,pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请填写正确邮箱",trigger:"blur"}],mobile:[{required:!1,pattern:/^[1][3,4,5,7,8][0-9]{9}$/,message:"请填写正确手机号",trigger:"blur"}]},rules2:{email:[{required:!1,pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请填写正确邮箱",trigger:"blur"}],mobile:[{required:!1,pattern:/^[1][3,4,5,7,8][0-9]{9}$/,message:"请填写正确手机号",trigger:"blur"}]}}),a=()=>{(0,n.dg)(e.searchParams).then((a=>{a.data&&(console.log("用户数据",a),e.userList=a.data.users,e.total=a.data.total)}))},l=()=>{e.dialogFormVisible=!0},o=l=>{l.validate((l=>{l&&(0,n.nz)(e.formData).then((l=>{l.data&&(e.dialogFormVisible=!1,e.formData={username:"",password:"",email:"",mobile:""},a())}))}))},r=l=>{l.validate((l=>{l&&(0,n.hS)(e.formData2).then((l=>{l.data&&(e.dialogFormEVisible=!1,a())}))}))},m=e=>{console.log("操作的那条数据",e),(0,n.pB)(e).then((e=>{e.data&&a()}))},t=a=>{console.log("编辑的那条数据",a);const{email:l,mobile:o,id:r}=a;e.dialogFormEVisible=!0,e.formData2.email=l,e.formData2.mobile=o,e.formData2.id=r},u=e=>{console.log("删除的那条数据",e),(0,n.rj)(e).then((e=>{a()}))};a();const s=(0,i.iH)(),d=(0,i.iH)();return{...(0,i.BK)(e),searchList:a,addUser:l,submitForm:o,submitEForm:r,userForm:s,userForm2:d,switchChange:m,editRow:t,deleteRow:u}}},c=l(89);const f=(0,c.Z)(p,[["render",d],["__scopeId","data-v-dd8ba8d0"]]);var g=f}}]);
//# sourceMappingURL=650.f01ef50d.js.map